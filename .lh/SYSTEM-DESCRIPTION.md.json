{
    "sourceFile": "SYSTEM-DESCRIPTION.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1735348197379,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1735348262100,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,103 +1,528 @@\n-# Initial Development Prompt for DirectAmelia\n+# DirectAmelia System Description\n \n-You are now the lead AI assistant for developing DirectAmelia, a sophisticated flight department management SAAS platform. Your responses should always be thorough, technically precise, and focused on building a scalable, secure system.\n+## Project Overview\n \n-## Project Context \n+DirectAmelia is an innovative Software-as-a-Service (SAAS) platform designed to revolutionize flight department management through the power of artificial intelligence. The system employs multiple specialized AI agents that work in harmony to streamline aviation operations, enhance safety, and optimize resource utilization.\n \n-DirectAmelia is an AI-powered flight department management system that uses multiple specialized AI agents to handle various aspects of aviation operations. The system is delivered as a SAAS platform with:\n+### Purpose & Vision\n+DirectAmelia aims to transform how flight departments operate by providing an intelligent, automated management system that handles everything from flight operations and maintenance to crew scheduling and regulatory compliance. The platform serves as a comprehensive solution that brings together various aspects of aviation management under a single, unified interface.\n \n-- Multiple specialized AI agents (Aviation Director, Chief Flight Attendant, etc.)\n-- Central User Interface Agent (CUIA) for user interactions\n-- Subscription-based access\n-- Multi-tenant architecture\n-- NMI payment processing\n-- Cloudflare integration\n-- OpenRouter AI integration\n+### Target Users\n+- Corporate Flight Departments\n+- Charter Operations\n+- Aircraft Management Companies\n+- Private Aviation Organizations\n+- Fixed-Base Operators (FBOs)\n+- Military Aviation Units\n+- Government Flight Operations\n \n-## Your Responsibilities\n+### Core Value Propositions\n+1. Intelligent Automation\n+   - AI-powered decision support\n+   - Automated scheduling and resource allocation\n+   - Predictive maintenance planning\n+   - Real-time operational optimization\n \n-1. Technical Development\n-   - Provide detailed technical solutions\n-   - Write clean, secure, scalable code\n-   - Design system architecture\n-   - Implement best practices\n+2. Enhanced Safety\n+   - Continuous compliance monitoring\n+   - Risk assessment and mitigation\n+   - Safety trend analysis\n+   - Automated safety reporting\n \n-2. Documentation\n-   - Maintain comprehensive wiki documentation\n-   - Document all new files and components\n-   - Update technical specifications\n-   - Track system evolution\n+3. Operational Efficiency\n+   - Streamlined workflows\n+   - Resource optimization\n+   - Cost reduction\n+   - Performance analytics\n \n-3. Quality Assurance\n-   - Ensure security best practices\n-   - Implement error handling\n-   - Include testing strategies\n-   - Consider scalability\n+4. Comprehensive Integration\n+   - Unified management platform\n+   - Seamless department coordination\n+   - Centralized documentation\n+   - Integrated communication\n \n-## Development Standards\n+### Key Differentiators\n+1. AI Agent Specialization\n+   - Role-specific AI agents\n+   - Contextual decision making\n+   - Continuous learning capabilities\n+   - Inter-agent collaboration\n \n-Follow these standards in all your work:\n-- Clean Architecture principles\n-- Domain-Driven Design patterns\n-- SOLID principles\n-- Comprehensive error handling\n-- Complete documentation\n-- Security-first approach\n+2. Advanced Technology Stack\n+   - Modern cloud architecture\n+   - Enterprise-grade security\n+   - Scalable infrastructure\n+   - Real-time processing\n \n-## Documentation Requirements\n+3. Industry Compliance\n+   - FAA regulatory alignment\n+   - EASA standards compliance\n+   - IS-BAO integration\n+   - Safety management system (SMS)\n \n-For each component you create:\n-1. Add to wiki documentation\n-2. Explain file purpose and structure\n-3. Document dependencies\n-4. Provide technical considerations\n\\ No newline at end of file\n-5. Include configuration details\n+### System Intelligence\n+The platform leverages multiple specialized AI agents, each focused on specific aspects of flight department management:\n \n-## First Task\n+1. Director of Aviation Agent\n+   - Strategic planning\n+   - Resource allocation\n+   - Performance monitoring\n+   - Budget management\n \n-Please begin by:\n+2. Chief Flight Attendant Agent\n+   - Cabin service standards\n+   - Crew scheduling\n+   - Service inventory\n+   - Training coordination\n \n-1. Setting up the initial solution structure for DirectAmelia\n-2. Creating the base project architecture\n-3. Implementing the fundamental deployment configuration\n-4. Establishing the wiki documentation structure\n+3. Director of Maintenance Agent\n+   - Maintenance planning\n+   - Parts inventory\n+   - Compliance tracking\n+   - Technical documentation\n \n-Please provide:\n-- Complete file structure\n-- Initial project configuration\n-- Basic CI/CD setup\n-- Documentation framework\n+4. Director of Marketing Agent\n+   - Charter promotion\n+   - Client relationships\n+   - Market analysis\n+   - Revenue optimization\n \n-In your response, include:\n-1. Detailed technical specifications\n-2. Implementation steps\n-3. Code examples\n-4. Documentation updates\n-5. Next steps\n+5. Flight Dispatcher Agent\n+   - Flight planning\n+   - Weather monitoring\n+   - Route optimization\n+   - Regulatory compliance\n \n-Note: Always consider the SAAS, multi-tenant nature of the platform in your solutions and document accordingly.\n+### Business Model\n+DirectAmelia operates on a subscription-based SAAS model with tiered pricing based on:\n+- Fleet size\n+- Number of users\n+- Feature requirements\n+- Custom integrations\n+- Support levels\n \n-## Response Format\n+### Implementation Approach\n+The system is delivered as a cloud-based solution with:\n+- Rapid deployment capabilities\n+- Customizable configurations\n+- Scalable resource allocation\n+- Continuous updates and improvements\n \n-Structure your responses as follows:\n+## Front Office Marketing Website\n \n-```markdown\n-# Implementation Plan\n+### Public-Facing Website\n+- Modern, responsive landing page showcasing DirectAmelia's capabilities\n+- Engaging hero section with animated illustrations of flight operations\n+- Interactive demo showcasing AI agent capabilities\n+- Client success stories and testimonials\n+- Features and benefits presentation\n+- Pricing plans and enterprise solutions\n+- Contact forms integrated with CRM\n+- Live chat support option\n+- Blog section for aviation industry insights\n+- SEO optimization for aviation keywords\n \n-## Understanding\n-[Confirm understanding of requirements]\n+### Design Elements\n+- Professional aviation-themed color scheme\n+- High-quality aircraft and operations imagery\n+- Smooth animations and transitions\n+- Mobile-first responsive design\n+- Fast loading times with image optimization\n+- Accessibility compliance (WCAG 2.1)\n+- Cross-browser compatibility\n+- Cookie consent management\n+- Analytics integration\n \n-## Approach\n-[Detailed technical approach]\n+### Marketing Features\n+- Lead generation forms\n+- Newsletter subscription\n+- Download gated content (whitepapers, case studies)\n+- Request demo functionality\n+- Integration with marketing automation\n+- A/B testing capability\n+- Conversion tracking\n+- Social proof elements\n+- Trust indicators (certifications, partnerships)\n \n-## Implementation\n-[Code and configuration details]\n+## SAAS Platform Components\n \n-## Documentation\n-[Wiki updates and documentation]\n+### Pricing & Subscription Management\n+- Tiered pricing plans with feature differentiation\n+- Custom enterprise pricing options\n+- Monthly and annual billing cycles\n+- Volume-based discounts\n+- Add-on features marketplace\n+- Free trial period management\n+- Promotional code system\n \n-## Next Steps\n-[Future considerations and next tasks]\n+### Shopping Cart System\n+```csharp\n+public class CartItem\n+{\n+    public string ProductId { get; set; }\n+    public SubscriptionTier Tier { get; set; }\n+    public BillingCycle BillingCycle { get; set; }\n+    public int Quantity { get; set; }\n+    public decimal Price { get; set; }\n+    public List<ProductAddOn> AddOns { get; set; }\n+}\n+\n+public class ShoppingCart\n+{\n+    public string CartId { get; set; }\n+    public string UserId { get; set; }\n+    public List<CartItem> Items { get; set; }\n+    public decimal SubTotal { get; set; }\n+    public decimal Tax { get; set; }\n+    public decimal Total { get; set; }\n+    public List<PromotionCode> AppliedPromotions { get; set; }\n+}\n ```\n \n-Now, please proceed with the initial solution setup and provide a complete response following these guidelines.s\n+### NMI Payment Gateway Integration\n+- Secure payment processing\n+- Tokenization of payment methods\n+- Recurring billing management\n+- Failed payment handling\n+- Refund processing\n+- Payment method updates\n+- Transaction logging\n+- Fraud prevention\n+\n+```csharp\n+public class NMIConfiguration\n+{\n+    public string ApiKey { get; set; }\n+    public string SecretKey { get; set; }\n+    public bool UseSandbox { get; set; }\n+    public string WebhookEndpoint { get; set; }\n+    public Dictionary<string, string> CustomFields { get; set; }\n+    public FraudPreventionSettings FraudSettings { get; set; }\n+}\n+```\n+\n+### Super Admin Portal\n+- User management dashboard\n+- Subscription oversight\n+- Revenue analytics\n+- Customer insights\n+- System configuration\n+- Access control management\n+- Audit logging\n+- Support ticket management\n+\n+### Core Components\n+\n+#### Agent Architecture\n+1. Central User Interface Agent (CUIA)\n+   - Primary interface between users and system\n+   - Handles all user queries and requests\n+   - Routes requests to appropriate specialized agents\n+   - Aggregates and presents responses to users\n+   - Maintains conversation context and history\n+\n+2. Specialized Agents\n+   - Director of Aviation Agent\n+   - Chief Flight Attendant Agent\n+   - Director of Maintenance Agent\n+   - Director of Marketing Agent\n+   - Flight Dispatcher Agent\n+\n+#### Message Bus Architecture\n+- Azure Service Bus implementation\n+- Publish/subscribe pattern\n+- Message queues for async processing\n+- Retry policies for failed communications\n+\n+```csharp\n+public interface IAgentMessage\n+{\n+    string MessageId { get; }\n+    string SourceAgentId { get; }\n+    string TargetAgentId { get; }\n+    string Intent { get; }\n+    Dictionary<string, object> Payload { get; }\n+    DateTime Timestamp { get; }\n+    MessagePriority Priority { get; }\n+}\n+```\n+\n+### Subscription Management\n+```csharp\n+public class Subscription\n+{\n+    public string SubscriptionId { get; set; }\n+    public string CustomerId { get; set; }\n+    public SubscriptionTier Tier { get; set; }\n+    public SubscriptionStatus Status { get; set; }\n+    public DateTime StartDate { get; set; }\n+    public DateTime? EndDate { get; set; }\n+    public BillingInfo BillingInfo { get; set; }\n+    public List<SubscriptionFeature> Features { get; set; }\n+    public List<AddOnService> AddOns { get; set; }\n+    public UsageMetrics Usage { get; set; }\n+}\n+```\n+\n+### Multi-tenant Architecture\n+- Tenant isolation\n+- Data partitioning\n+- Resource allocation\n+- Usage monitoring\n+- Tenant configuration\n+- Custom domain support\n+\n+### Deployment & Database Architecture\n+\n+#### Vercel Deployment\n+- Vercel for application hosting\n+- Serverless function architecture\n+- Edge network distribution\n+- Automatic deployments\n+- Preview deployments for PRs\n+- Environment variable management\n+- Custom domain configuration\n+\n+```csharp\n+public class VercelConfiguration\n+{\n+    public string ProjectId { get; set; }\n+    public string TeamId { get; set; }\n+    public Dictionary<string, string> EnvironmentVariables { get; set; }\n+    public VercelDeploymentSettings DeploymentSettings { get; set; }\n+    public EdgeNetworkConfig EdgeConfig { get; set; }\n+}\n+```\n+\n+#### MongoDB Infrastructure\n+- Private MongoDB server instances\n+- Replica set configuration\n+- Sharding strategy\n+- Backup configuration\n+- Monitoring setup\n+- Performance optimization\n+- Security configuration\n+\n+```csharp\n+public class MongoDbConfiguration\n+{\n+    public string ConnectionString { get; set; }\n+    public string DatabaseName { get; set; }\n+    public MongoClientSettings ClientSettings { get; set; }\n+    public Dictionary<string, string> CollectionMappings { get; set; }\n+    public MongoSecuritySettings SecuritySettings { get; set; }\n+    public MongoPerformanceSettings PerformanceSettings { get; set; }\n+}\n+```\n+\n+### Cloudflare Integration\n+\n+#### DNS Management\n+- Automated DNS provisioning for new tenants\n+- Custom domain configuration\n+- SSL/TLS certificate management\n+- DNS record automation\n+- Domain health monitoring\n+\n+#### Security Features\n+- DDoS protection\n+- Web Application Firewall (WAF)\n+- Bot protection\n+- Rate limiting\n+- Zero Trust security\n+- Access rules configuration\n+- IP reputation filtering\n+\n+#### Performance Optimization\n+- CDN configuration\n+- Cache rules management\n+- Image optimization\n+- Minification settings\n+- Smart routing\n+- Load balancing\n+- Analytics integration\n+\n+```csharp\n+public class CloudflareConfiguration\n+{\n+    public string ApiToken { get; set; }\n+    public string ZoneId { get; set; }\n+    public Dictionary<string, string> DnsTemplates { get; set; }\n+    public SecuritySettings SecurityConfig { get; set; }\n+    public CdnSettings CdnConfig { get; set; }\n+    public Dictionary<string, string> CustomRules { get; set; }\n+}\n+\n+public class TenantDomainManager\n+{\n+    public async Task<DomainConfig> ProvisionNewDomain(string tenantId, string customDomain)\n+    {\n+        // Create DNS records\n+        // Configure SSL\n+        // Setup security rules\n+        // Enable CDN\n+        // Verify domain health\n+    }\n+\n+    public async Task<HealthStatus> MonitorDomainHealth(string tenantId)\n+    {\n+        // Check DNS propagation\n+        // Verify SSL status\n+        // Monitor performance\n+        // Check security status\n+    }\n+}\n+```\n+\n+### OpenRouter Integration\n+\n+#### API Configuration\n+- Admin panel for API key management\n+- Secure key storage using Azure Key Vault\n+- Environment-based configuration\n+- API usage monitoring and quotas\n+\n+```csharp\n+public class OpenRouterConfig\n+{\n+    public string ApiKey { get; set; }\n+    public string BaseUrl { get; set; } = \"https://openrouter.ai/api/v1\";\n+    public Dictionary<string, string> ModelMappings { get; }\n+    public RateLimitSettings RateLimits { get; }\n+}\n+```\n+\n+### Access Control\n+```csharp\n+public class TenantAccess\n+{\n+    public string TenantId { get; set; }\n+    public SubscriptionTier Tier { get; set; }\n+    public List<Feature> EnabledFeatures { get; set; }\n+    public ResourceLimits Limits { get; set; }\n+    public List<UserRole> AllowedRoles { get; set; }\n+    public Dictionary<string, int> ApiQuotas { get; set; }\n+}\n+```\n+\n+### Usage Tracking\n+- API call monitoring\n+- Storage utilization\n+- User activity tracking\n+- Feature usage analytics\n+- Performance metrics\n+- Billing calculations\n+\n+### Billing System\n+- Invoice generation\n+- Payment processing\n+- Credit management\n+- Refund handling\n+- Tax calculation\n+- Revenue recognition\n+- Financial reporting\n+\n+### Technical Requirements\n+\n+#### Development Stack\n+\n+##### Core Framework\n+- ASP.NET Core 8.0 with C# 12\n+- Blazor WebAssembly for frontend\n+- Entity Framework Core 8.0\n+- .NET Identity for authentication\n+\n+##### Essential NuGet Packages\n+- MediatR for CQRS\n+- AutoMapper for object mapping\n+- FluentValidation for validation\n+- Serilog for logging\n+- Polly for resilience\n+- Hangfire for background jobs\n+- SignalR for real-time communications\n+- OpenRouter.NET for AI integration\n+- Azure SDK packages\n+- Swashbuckle for API documentation\n+\n+##### Testing Frameworks\n+- xUnit for unit testing\n+- NSubstitute for mocking\n+- Bogus for test data generation\n+- WebApplicationFactory for integration tests\n+- Playwright for UI testing\n+\n+#### Security Architecture\n+- Authentication & Authorization\n+  * Azure AD B2C integration\n+  * Role-based access control\n+  * JWT token authentication\n+  * Session management\n+- Data Protection\n+  * End-to-end encryption\n+  * Secure message passing\n+  * Data isolation\n+  * Audit logging\n+\n+#### Data Architecture\n+- Azure SQL Database for structured data\n+- Azure Blob Storage for documents\n+- Redis Cache for performance\n+- Time-series data for analytics\n+\n+#### Deployment\n+- Azure Cloud Services\n+- Docker containerization\n+- Kubernetes orchestration\n+- CI/CD pipeline\n+\n+#### Monitoring\n+- Application Insights\n+- Custom telemetry\n+- Performance metrics\n+- Error tracking\n+\n+#### Scalability\n+- Horizontal scaling\n+- Load balancing\n+- Auto-scaling rules\n+- Resource optimization\n+\n+### Implementation Guidelines\n+\n+#### Code Organization\n+- Clean Architecture\n+- Domain-Driven Design\n+- CQRS pattern\n+- Event Sourcing\n+\n+#### Testing Strategy\n+- Unit testing\n+- Integration testing\n+- Load testing\n+- Security testing\n+\n+#### Documentation\n+- API documentation\n+- System architecture\n+- Deployment guides\n+- User manuals\n+\n+### Performance Metrics\n+\n+#### Response Times\n+- User interface: < 100ms\n+- Agent processing: < 2s\n+- System operations: < 5s\n+- Batch processing: < 30s\n+\n+#### Scalability Targets\n+- Concurrent users: 1000+\n+- Messages per second: 10000+\n+- Document processing: 1000/hour\n+- Real-time updates: 100/second\n+\n+#### Reliability Goals\n+- System uptime: 99.99%\n+- Data durability: 99.999%\n+- Message delivery: 99.99%\n+- Backup frequency: 15 minutes\n\\ No newline at end of file\n"
                }
            ],
            "date": 1735348197379,
            "name": "Commit-0",
            "content": "# Initial Development Prompt for DirectAmelia\n\nYou are now the lead AI assistant for developing DirectAmelia, a sophisticated flight department management SAAS platform. Your responses should always be thorough, technically precise, and focused on building a scalable, secure system.\n\n## Project Context \n\nDirectAmelia is an AI-powered flight department management system that uses multiple specialized AI agents to handle various aspects of aviation operations. The system is delivered as a SAAS platform with:\n\n- Multiple specialized AI agents (Aviation Director, Chief Flight Attendant, etc.)\n- Central User Interface Agent (CUIA) for user interactions\n- Subscription-based access\n- Multi-tenant architecture\n- NMI payment processing\n- Cloudflare integration\n- OpenRouter AI integration\n\n## Your Responsibilities\n\n1. Technical Development\n   - Provide detailed technical solutions\n   - Write clean, secure, scalable code\n   - Design system architecture\n   - Implement best practices\n\n2. Documentation\n   - Maintain comprehensive wiki documentation\n   - Document all new files and components\n   - Update technical specifications\n   - Track system evolution\n\n3. Quality Assurance\n   - Ensure security best practices\n   - Implement error handling\n   - Include testing strategies\n   - Consider scalability\n\n## Development Standards\n\nFollow these standards in all your work:\n- Clean Architecture principles\n- Domain-Driven Design patterns\n- SOLID principles\n- Comprehensive error handling\n- Complete documentation\n- Security-first approach\n\n## Documentation Requirements\n\nFor each component you create:\n1. Add to wiki documentation\n2. Explain file purpose and structure\n3. Document dependencies\n4. Provide technical considerations\n5. Include configuration details\n\n## First Task\n\nPlease begin by:\n\n1. Setting up the initial solution structure for DirectAmelia\n2. Creating the base project architecture\n3. Implementing the fundamental deployment configuration\n4. Establishing the wiki documentation structure\n\nPlease provide:\n- Complete file structure\n- Initial project configuration\n- Basic CI/CD setup\n- Documentation framework\n\nIn your response, include:\n1. Detailed technical specifications\n2. Implementation steps\n3. Code examples\n4. Documentation updates\n5. Next steps\n\nNote: Always consider the SAAS, multi-tenant nature of the platform in your solutions and document accordingly.\n\n## Response Format\n\nStructure your responses as follows:\n\n```markdown\n# Implementation Plan\n\n## Understanding\n[Confirm understanding of requirements]\n\n## Approach\n[Detailed technical approach]\n\n## Implementation\n[Code and configuration details]\n\n## Documentation\n[Wiki updates and documentation]\n\n## Next Steps\n[Future considerations and next tasks]\n```\n\nNow, please proceed with the initial solution setup and provide a complete response following these guidelines.s"
        }
    ]
}